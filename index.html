
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Vodafone NG POWRA</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    .section { margin-bottom: 20px; }
    .readonly { background: #f0f0f0; }
    button { margin-left: 10px; }
    a { display: block; margin-top: 5px; }
  </style>
</head>
<body>
  <h1>Vodafone NG POWRA</h1>

  <div class="section">
    <h3>Location (Coordinates)</h3>
    <input type="text" id="locationField" class="readonly" readonly size="40">
    <button onclick="getCoords()">Get Current Location</button>
    <a id="locationLink" target="_blank"></a>
  </div>

  <div class="section">
    <h3>W3W Location</h3>
    <input type="text" id="w3wField" class="readonly" readonly size="40">
    <button onclick="getW3W()">Get Current W3W</button>
    <a id="w3wLink" target="_blank"></a>
  </div>

  <script>
    const API_KEY = "0OHVUL46";

    function getCoords() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function(pos) {
          const lat = pos.coords.latitude.toFixed(6);
          const lng = pos.coords.longitude.toFixed(6);
          const coords = lat + ", " + lng;
          document.getElementById("locationField").value = coords;
          const link = "https://maps.google.com/?q=" + lat + "," + lng;
          document.getElementById("locationLink").href = link;
          document.getElementById("locationLink").textContent = "Open in Google Maps";
        }, function(err) {
          alert("Unable to get location: " + err.message);
        });
      } else {
        alert("Geolocation not supported");
      }
    }

    function getW3W() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function(pos) {
          const lat = pos.coords.latitude;
          const lng = pos.coords.longitude;
          const apiUrl = `https://api.what3words.com/v3/convert-to-3wa?coordinates=${lat},${lng}&key=${API_KEY}`;
          fetch(apiUrl)
            .then(r => r.json())
            .then(data => {
              if (data.words) {
                document.getElementById("w3wField").value = data.words;
                const link = "https://what3words.com/" + data.words;
                document.getElementById("w3wLink").href = link;
                document.getElementById("w3wLink").textContent = "Open in What3Words";
              } else {
                alert("W3W error: " + JSON.stringify(data));
              }
            })
            .catch(err => alert("Fetch error: " + err));
        }, function(err) {
          alert("Unable to get location: " + err.message);
        });
      } else {
        alert("Geolocation not supported");
      }
    }
  </script>
</body>
</html>
